{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\joaqu\\\\Documents\\\\Trabajo logica\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\joaqu\\\\Documents\\\\Trabajo logica\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\joaqu\\\\Documents\\\\Trabajo logica\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\joaqu\\\\Documents\\\\Trabajo logica\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import axios from\"axios\";import{Chart}from\"react-google-charts\";axios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';var ResultadosScheduling=/*#__PURE__*/function(_React$Component){_inherits(ResultadosScheduling,_React$Component);var _super=_createSuper(ResultadosScheduling);function ResultadosScheduling(props){var _this;_classCallCheck(this,ResultadosScheduling);_this=_super.call(this,props);_this.requestResults=function(hel){axios.post(\"http://localhost:8000/scheduling/\",{helados:hel}).then(function(res){console.log(res);_this.setState({datos:res.data});_this.handleGrafico(res.data.rows);}).catch(function(err){console.log(err);});};_this.handleGrafico=function(filas){var sumaHoras=function sumaHoras(horas){var dt=new Date();console.log(\"antes dt es\",dt);dt.setHours(dt.getHours()+horas);console.log(\"despues dt es \",dt);return dt;};var corrige_horas=function corrige_horas(rows){for(var i=0;i<rows.length;i++){rows[i][3]=sumaHoras(rows[i][3]);rows[i][4]=sumaHoras(rows[i][4]);}return rows;};var nuevo_filas=corrige_horas(filas);var datos_graph=[[{type:'string',label:'Task ID'},{type:'string',label:'Task Name'},{type:'string',label:'Resource'},{type:'date',label:'Start Date'},{type:'date',label:'End Date'},{type:'number',label:'Duration'},{type:'number',label:'Percent Complete'},{type:'string',label:'Dependencies'}]].concat(nuevo_filas);_this.setState({datosGrafico:datos_graph});console.log(\"datos grafico es\",_this.state.datosGrafico);};_this.state={datos:[],datosGrafico:[]};return _this;}_createClass(ResultadosScheduling,[{key:\"usarQuery\",value:function usarQuery(){var search=window.location.href;// could be '?foo=bar'\nvar params=new URLSearchParams(search);return params;}},{key:\"componentDidMount\",value:function componentDidMount(){var query=this.usarQuery();var parametros=Array.from(query.entries());var id_helados=[];console.log(\" parametros es \",parametros);if(parametros!=null){parametros[0][0]=\"sabor1\";//porque devuelve como primero toda la url\nfor(var i=0;i<parametros.length;i++){console.log(parametros[i]);id_helados.push(parametros[i][1]);}console.log(\"id helados es\",id_helados);this.requestResults(id_helados);}console.log(\"state aca es\",this.state.datos);console.log(\"rows es\",this.state.datos.rows);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Resultados scheduling\"),/*#__PURE__*/React.createElement(\"h5\",null,\"La duraci\\xF3n \\xF3ptima es de \",this.state.datos.duracion_optima,\" horas.\"),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',maxWidth:900}},/*#__PURE__*/React.createElement(Chart,{width:'100%',height:'1200px',chartType:\"Gantt\",loader:/*#__PURE__*/React.createElement(\"div\",null,\"Loading Chart\"),data:this.state.datosGrafico,rootProps:{'data-testid':'3'}})));}}]);return ResultadosScheduling;}(React.Component);export default ResultadosScheduling;","map":{"version":3,"sources":["C:/Users/joaqu/Documents/Trabajo logica/frontend/src/components/ResultadosScheduling.js"],"names":["React","axios","Chart","defaults","xsrfCookieName","xsrfHeaderName","ResultadosScheduling","props","requestResults","hel","post","helados","then","res","console","log","setState","datos","data","handleGrafico","rows","catch","err","filas","sumaHoras","horas","dt","Date","setHours","getHours","corrige_horas","i","length","nuevo_filas","datos_graph","type","label","concat","datosGrafico","state","search","window","location","href","params","URLSearchParams","query","usarQuery","parametros","Array","from","entries","id_helados","push","duracion_optima","display","maxWidth","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from \"axios\";\r\nimport { Chart } from \"react-google-charts\";\r\n\r\naxios.defaults.xsrfCookieName = 'csrftoken';\r\naxios.defaults.xsrfHeaderName = 'X-CSRFToken';\r\n\r\nclass ResultadosScheduling extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            datos: [],\r\n            datosGrafico: [],\r\n        }\r\n    }\r\n\r\n    usarQuery() {\r\n        const search = window.location.href; // could be '?foo=bar'\r\n        let params =  new URLSearchParams(search)\r\n        return params;\r\n    }\r\n\r\n    requestResults = (hel) => {\r\n        axios\r\n        .post(\"http://localhost:8000/scheduling/\", {helados: hel})\r\n        .then(res => {\r\n            console.log(res);\r\n            this.setState({ datos: res.data });\r\n            this.handleGrafico(res.data.rows);\r\n        })\r\n        .catch(err => {console.log(err)});\r\n    }\r\n\r\n    componentDidMount(){\r\n        let query = this.usarQuery();\r\n        let parametros = Array.from(query.entries());\r\n        let id_helados = [];\r\n        console.log(\" parametros es \",parametros)\r\n        if(parametros != null){\r\n            parametros[0][0] = \"sabor1\"; //porque devuelve como primero toda la url\r\n            for (let i=0; i<parametros.length; i++){\r\n                console.log(parametros[i])\r\n                id_helados.push(parametros[i][1])\r\n            }\r\n            console.log(\"id helados es\",id_helados);\r\n            this.requestResults(id_helados);\r\n        }\r\n        console.log(\"state aca es\",this.state.datos);\r\n        console.log(\"rows es\",this.state.datos.rows);\r\n\r\n    }\r\n\r\n    handleGrafico = (filas) =>{\r\n        let sumaHoras = (horas) =>{\r\n            var dt = new Date();\r\n            console.log(\"antes dt es\", dt)\r\n            dt.setHours( dt.getHours() + horas );\r\n            console.log(\"despues dt es \", dt)\r\n            return dt;\r\n        }\r\n    \r\n        let corrige_horas = (rows) =>{\r\n            for(let i =0; i < rows.length; i++){\r\n                rows[i][3] = sumaHoras(rows[i][3]);\r\n                rows[i][4] = sumaHoras(rows[i][4]);\r\n            }\r\n            return rows\r\n        }\r\n        \r\n        let nuevo_filas = corrige_horas(filas);\r\n\r\n        let datos_graph= [\r\n            [\r\n                { type: 'string', label: 'Task ID' },\r\n                { type: 'string', label: 'Task Name' },\r\n                { type: 'string', label: 'Resource' },\r\n                { type: 'date', label: 'Start Date' },\r\n                { type: 'date', label: 'End Date' },\r\n                { type: 'number', label: 'Duration' },\r\n                { type: 'number', label: 'Percent Complete' },\r\n                { type: 'string', label: 'Dependencies' },\r\n            ]\r\n        ].concat(nuevo_filas);\r\n        \r\n        this.setState({datosGrafico: datos_graph})\r\n\r\n        console.log(\"datos grafico es\", this.state.datosGrafico)\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n                <h1>Resultados scheduling</h1>\r\n                <h5>La duración óptima es de {this.state.datos.duracion_optima} horas.</h5>\r\n                <div style={{ display: 'flex', maxWidth: 900 }}>\r\n                    <Chart\r\n                        width={'100%'}\r\n                        height={'1200px'}\r\n                        chartType=\"Gantt\"\r\n                        loader={<div>Loading Chart</div>}\r\n                        data={this.state.datosGrafico}\r\n                        rootProps={{ 'data-testid': '3' }}\r\n                    />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ResultadosScheduling;"]},"metadata":{},"sourceType":"module"}